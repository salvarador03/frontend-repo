const __vite__fileDeps=["assets/index-O4DpcuVR.js","assets/index-CtZ52vaE.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as N,u as v,r as c,a as E,b as S,m as k,g as z,j as e,B as F,G as O,d as _,e as L,h as P,L as p,N as q,I as C}from"./index-O4DpcuVR.js";const I=async()=>{try{const s=await N(()=>import("./index-O4DpcuVR.js").then(r=>r.i),__vite__mapDeps([0,1]));if(console.log("jsonwebtoken loaded:",s),!s.default)throw new Error("Invalid jwt module");return s.default}catch(s){throw console.error("Error loading jwt module:",s),s}},A=async s=>{try{const n=(await I()).decode(s);return console.log("Decoded token:",n),localStorage.setItem("userSession",s),n}catch(r){console.error("Error setting session:",r)}},B=()=>{const{register:s,handleSubmit:r,formState:{errors:n}}=v(),[m,f]=c.useState(!1),[i,u]=c.useState({isOpen:!1,message:"",type:""}),[o,h]=c.useState({}),y=E(),{language:d}=S(),{login:w}=k();c.useEffect(()=>{z(d).then(t=>h(t)).catch(t=>console.error("Failed to load i18n messages:",t))},[d]);const j=()=>{f(t=>!t)},x=(t,l)=>{u({isOpen:!0,message:l,type:t}),setTimeout(()=>{u({isOpen:!1}),t==="success"&&y("/sobremi")},3e3)},b=async t=>{var l,g;try{const a=await C(t.usuario,t.contrasena,d),M=await A(a.token);w(a.token),x("success",a.mensaje)}catch(a){console.error("Error al intentar iniciar sesiÃ³n:",a),x("error",((g=(l=a.response)==null?void 0:l.data)==null?void 0:g.message)||o["text.login.error"])}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-100 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-6 p-6 bg-white rounded-lg shadow-lg",children:[e.jsx(F,{}),e.jsx("h2",{className:"text-center text-3xl font-extrabold text-zinc-900",children:o["text.login.titulo"]}),e.jsxs("form",{className:"space-y-4",onSubmit:r(b),children:[e.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"usuario",className:"block text-sm font-medium text-zinc-700 flex items-center",children:[e.jsx(O,{className:"mr-2"}),o["text.login.usuario"]]}),e.jsx("input",{id:"usuario",name:"usuario",type:"text",autoComplete:"usuario",required:!0,className:"appearance-none block w-full px-3 py-2 border border-yellow-400 placeholder-zinc-500 text-gray-900 focus:outline-none focus:ring-yellow-600 focus:border-yellow-600 sm:text-sm hover:border-yellow-600 transition rounded-md",...s("usuario",{required:!0})}),n.usuario&&e.jsx("span",{className:"text-red-500",children:o["NotEmpty.usuario.email"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{htmlFor:"contrasena",className:"block text-sm font-medium text-zinc-700 flex items-center",children:[e.jsx(_,{className:"mr-2"}),o["text.login.contrasena"]]}),e.jsx("input",{id:"contrasena",name:"contrasena",type:m?"text":"password",autoComplete:"current-password",required:!0,className:"appearance-none block w-full px-3 py-2 pr-10 border border-yellow-400 placeholder-zinc-500 text-gray-900 focus:outline-none focus:ring-yellow-600 focus:border-yellow-600 sm:text-sm hover:border-yellow-600 transition rounded-md",...s("contrasena",{required:!0})}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 top-5 flex items-center px-3 text-zinc-700 hover:text-zinc-900",onClick:j,children:m?e.jsx(L,{}):e.jsx(P,{})}),n.contrasena&&e.jsx("span",{className:"text-red-500",children:o["NotEmpty.usuario.contrasena"]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(p,{to:"/forgot-password",className:"font-medium text-gray-700 hover:text-gray-800 transition",children:o["text.login.forgot"]})}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-yellow-400 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black transition",children:o["text.login.boton"]})})]}),e.jsx("div",{className:"text-center",children:e.jsx(p,{to:"/register",className:"font-medium text-gray-700 hover:text-gray-800 transition",children:o["text.login.createAccount"]})}),i.isOpen&&e.jsx(q,{type:i.type,message:i.message,isOpen:i.isOpen,onClose:()=>u({isOpen:!1})})]})})};export{B as default};
