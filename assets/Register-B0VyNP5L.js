import{u as O,r as o,a as C,b as P,m as U,g as A,j as e,B as M,E as g,G as B,F as R,d as $,e as L,h as G,N as H,H as T}from"./index-pt3s4JTT.js";const J=()=>{const{register:l,handleSubmit:h,watch:p,formState:{errors:a}}=O(),[f,y]=o.useState(!1),[b,j]=o.useState(null),[n,u]=o.useState({isOpen:!1,message:"",type:""}),[t,w]=o.useState({}),N=C(),{language:x}=P(),{login:v}=U(),[k,V]=o.useState(""),[E,D]=o.useState(""),i=p("contrasena"),c=p("confirmarContrasena");o.useEffect(()=>{j(i&&c&&i===c)},[i,c]),o.useEffect(()=>{A(x).then(s=>w(s)).catch(s=>console.error("Failed to load i18n messages:",s))},[x]);const F=()=>{y(s=>!s)},d=(s,r)=>{u({isOpen:!0,message:r,type:s}),setTimeout(()=>{u({isOpen:!1}),s==="success"&&N("/sobremi")},3e3)},z=async s=>{if(!b){d("error",t["text.register.contrasenas.no.coinciden"]);return}try{const r=await T(s,x);if(r.status===201){const m=r.token;v(m),d("success",r.message||t["text.register.success"])}else d("error",r.message||"Error desconocido")}catch(r){console.error("An error occurred during registration:",r),d("error",r.message||"An error occurred. Please check the console for more details.")}},S=()=>!i||!c?"border-gray-300":b?"border-green-500":"border-red-500";return e.jsx("div",{className:"flex items-center justify-center bg-zinc-100 px-4 pt-36 sm:px-6 lg:px-8 h-screen",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-lg",children:[e.jsx(M,{}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-zinc-900",children:t["text.register.titulo"]}),e.jsx("form",{className:"space-y-6",onSubmit:h(z),children:e.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"nombre",className:"block text-sm font-medium text-zinc-700 flex items-center",children:[e.jsx(g,{className:"mr-2"}),t["text.register.label.nombre"]]}),e.jsx("input",{id:"nombre",...l("nombre",{required:!0}),className:"appearance-none block w-full px-3 py-2 border border-yellow-400 placeholder-zinc-500 text-gray-900 focus:outline-none focus:ring-yellow-600 focus:border-yellow-600 sm:text-sm hover:border-yellow-600 transition rounded-md"}),a.nombre&&e.jsx("p",{className:"text-red-500",children:"Nombre es requerido"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"apellidos",className:"block text-sm font-medium text-zinc-700 flex items-center",children:[e.jsx(g,{className:"mr-2"}),t["text.register.label.apellidos"]]}),e.jsx("input",{id:"apellidos",...l("apellidos",{required:!0}),className:"appearance-none block w-full px-3 py-2 border border-yellow-400 placeholder-zinc-500 text-gray-900 focus:outline-none focus:ring-yellow-600 focus:border-yellow-600 sm:text-sm hover:border-yellow-600 transition rounded-md"}),a.apellidos&&e.jsx("p",{className:"text-red-500",children:"Apellidos es requerido"})]}),[{name:"usuario",label:t["text.register.label.username"],error:k,icon:e.jsx(B,{className:"mr-2"})},{name:"email",label:t["text.register.label.email"],error:E,icon:e.jsx(R,{className:"mr-2"})}].map(({name:s,label:r,error:m,icon:q})=>e.jsxs("div",{children:[e.jsxs("label",{htmlFor:s,className:"block text-sm font-medium text-zinc-700 flex items-center",children:[q,r]}),e.jsx("input",{id:s,...l(s,{required:`${r} es requerido`}),className:"appearance-none block w-full px-3 py-2 border border-yellow-400 placeholder-zinc-500 text-gray-900 focus:outline-none focus:ring-yellow-600 focus:border-yellow-600 sm:text-sm hover:border-yellow-600 transition rounded-md"}),a[s]&&e.jsx("p",{className:"text-red-500",children:a[s].message}),m&&e.jsx("p",{className:"text-red-500",children:m})]},s)),[{name:"contrasena",label:t["text.register.label.contrasena"]},{name:"confirmarContrasena",label:t["text.register.label.confirmar"]}].map(({name:s,label:r})=>e.jsxs("div",{className:"relative",children:[e.jsxs("label",{htmlFor:s,className:"block text-sm font-medium text-zinc-700 flex items-center",children:[e.jsx($,{className:"mr-2"}),r]}),e.jsxs("div",{className:"flex relative",children:[e.jsx("input",{id:s,type:f?"text":"password",...l(s,{required:`${r} es requerida`}),className:`appearance-none block w-full px-3 py-2 border ${S()} placeholder-zinc-500 text-gray-900 focus:outline-none sm:text-sm rounded-md`}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-zinc-700 hover:text-zinc-900",onClick:F,children:f?e.jsx(L,{}):e.jsx(G,{})})]}),a[s]&&e.jsx("p",{className:"text-red-500 mt-2",children:a[s].message})]},s)),e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-yellow-400 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black transition",children:t["text.register.boton"]})]})}),n.isOpen&&e.jsx(H,{type:n.type,message:n.message,isOpen:n.isOpen,onClose:()=>u({isOpen:!1})})]})})};export{J as default};
